# 임시 Nginx 설정 (Certbot HTTP 챌린지 전용)
# 사용법:
# 1. 이 파일을 서버의 /etc/nginx/sites-available/ 아래로 복사
#    sudo cp nginx_temp_certbot.conf /etc/nginx/sites-available/temp-certbot
# 2. 활성화
#    sudo ln -s /etc/nginx/sites-available/temp-certbot /etc/nginx/sites-enabled/temp-certbot
# 3. 기본 사이트 링크가 있다면 비활성화
#    sudo rm /etc/nginx/sites-enabled/default
# 4. nginx 재적용
#    sudo nginx -t && sudo systemctl reload nginx
# 5. certbot 실행
#    sudo certbot --nginx -d tc.o-r.kr
# 6. 인증 성공 후 기존 prod 설정으로 되돌리고 이 파일 링크 삭제
#    sudo rm /etc/nginx/sites-enabled/temp-certbot && sudo systemctl reload nginx

server {
    listen 80;
    server_name tc.o-r.kr 43.203.93.244;

    # 헬스 체크용 기본 응답
    location / {
        return 200 'TechWindow temporary HTTP endpoint';
        add_header Content-Type text/plain;
    }

    # Certbot HTTP-01 챌린지 경로
    location ^~ /.well-known/acme-challenge/ {
        default_type text/plain;
        root /var/www/html;
    }

    # 기타 숨김 파일 차단 (선택)
    location ~ /\. {
        deny all;
    }
}
